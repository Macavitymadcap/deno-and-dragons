<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Character Sheet</title>
    <link rel="stylesheet" href="static/styles.css" />
    <link rel="icon" href="images/favicon.ico" />
    <script
      src="https://unpkg.com/htmx.org@2.0.2"
      integrity="sha384-Y7hw+L/jvKeWIRRkqWYfPcvVxHzVzn5REgzbawhxAuQGwX1XWe70vji+VSeHOThJ"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <script src="static/script.js" type="module"></script>
  </head>

  <body>
    <main>
      <div
      id="dice-roller"
      popover="manual"
      class="card"
      hx-get="molecules/roller.html"
      hx-trigger="load"
      hx-swap="innerHTML"
      hx-
    >
    </div>
    <section class="character-sheet">
      <section name="character-heading">
        <fieldset class="character-sheet-heading">
          <legend>DANGEONS & DRAGONS</legend>
          
          <div class="rows columns-2">
            <div>
              <label for="character-name">
                Character Name
                <input id="character-name" type="text" name="character-name" />
              </label>
  
              <fieldset class="character-sheet-core">
                <div class="rows columns-3">
                  <label for="character-class">
                    Class & Level
                    <span>
                      <input type="text" name="character-class" />
                      <span class="chip">
                        <button
                        title="Decrement"
                          _="on click 
                              if (the next <output/>).textContent > 1 
                                decrement (the next <output/>).textContent"
                        >
                          &#8722;
                        </button>
                        <output id="character-level" name="character-level">1</output>
                        <button
                          title="Increment"
                          _="on click 
                              if (the previous <output/>).textContent < 20 
                                increment (the previous <output/>).textContent"
                        >
                          &#43;
                        </button>

                      </span>
                    </span>
                  </label>
                  
                  <label for="character-background">
                    Background
                    <input type="text" name="character-background" />
                  </label>
    
                  <label for="player-name">
                    Player Name
                    <input type="text" name="player-name" />
                  </label>
                </div>
  
                <div class="rows columns-3">
                  <label for="character-race">
                    Race
                    <input type="text" name="character-race" />
                  </label>
    
                  <label for="character-alignment">
                    Alignment
                    <input type="text" name="character-alignment" />
                  </label>
    
                  <label for="character-experience-points">
                    Experience Points
                    <input type="number" name="character-experience-points" />
                  </label>
                </div>
              </fieldset>
            </div>

            <fieldset class="character-sheet-description">
              <div class="rows columns-3">
                <label for="character-age">
                  Age
                  <input type="number" name="character-age"> 
                </label>

                <label for="character-height">
                  Height
                  <input type="text" name="character-height"> 
                </label>

                <label for="character-weight">
                  Weight
                  <input type="text" name="character-weight"> 
                </label>
              </div>

              <div class="rows columns-3">
                <label for="character-eyes">
                  Eyes
                  <input type="text" name="character-eyes">
                </label>

                <label for="character-skin">
                  Skin
                  <input type="text" name="character-skin">
                </label>

                <label for="character-hair">
                  Hair
                  <input type="text" name="character-hair">
                </label>
              </div>
            </fieldset>
          </div>
        </fieldset>
      </section>

      <section class="character-rows">
        <div class="rows columns-3">
          <section name="column-1">
            <fieldset name="character-sheet-abilities" class="character-sheet-abilities">
              <legend>ABILITIES</legend>
    
              <div class="rows columns-3">
                <fieldset name="character-sheet-abiility-strength-score" class="character-sheet-ability">
                  <legend>STRENGTH</legend>
                    <div class="rows columns-3">
                      <label for="strength-score">
                        Score
                        <span class="chip">
                          <button
                            title="Decrement"
                            _="on click 
                            set proficiency to 2
                            if #strength-score.textContent >= 0 
                              decrement #strength-score.textContent
                              set score to (#strength-score.textContent) as an Int

                              set modifier to Math.floor((score - 10) / 2)

                              if modifier is greater than or equal to 0 
                                set #strength-modifier.textContent to `+${modifier}`
                                set #strength-save.textContent to `+${modifier}`

                                if (#strength-save-proficiency.checked)
                                  set #strength-save.textContent to `+${modifier + proficiency}`
                                end
                              end

                              if modifier is less than 0 
                                set #strength-modifier.textContent to modifier
                                set #strength-save.textContent to modifier

                                if (#strength-save-proficiency.checked)
                                  set #strength-save.textContent to modifier + proficiency
                                end
                              end
                            end"
                          >
                            &#8722;
                          </button>
                          <output id="strength-score" name="strength-score">10</output>
                          <button
                            title="Increment"
                            _="on click 
                            set proficiency to 2

                            if #strength-score.textContent < 30 
                              increment #strength-score.textContent
                              set score to (#strength-score.textContent) as an Int

                              set modifier to Math.floor((score - 10) / 2)

                              if modifier is greater than or equal to 0 
                                set #strength-modifier.textContent to `+${modifier}`
                                set #strength-save.textContent to `+${modifier}`

                                if (#strength-save-proficiency.checked)
                                  set #strength-save.textContent to `+${modifier + proficiency}`
                                end
                              end

                              if modifier is less than 0 
                                set #strength-modifier.textContent to modifier
                                set #strength-save.textContent to modifier

                                if (#strength-save-proficiency.checked)
                                  set #strength-save.textContent to modifier + proficiency
                                end
                              end
                            end"
                          >
                            &#43;
                          </button>
                        </span>
                      </label>
                      <label for="strength-modifier">
                        Mod
                        <button
                          class="roller"
                          popovertarget="dice-roller"
                          popoveraction="show"
                          _="on click 
                            set modifier to #strength-modifier.textContent
                            set sign to '+'
                            if modifier is less than 0 set sign to '-' end
                            set #dice-input's value to 'd20' + sign + Math.abs(modifier)
                            send click to the last <button/> in #dice-roller"
                        >
                        <output id="strength-modifier" name="strength-modifier">+0</output>
                        </button>
                      </label>
                      <label for="strength-save">
                        Save
                        <span>
                          <button
                            class="roller"
                            popovertarget="dice-roller"
                            popoveraction="show"
                            _="on click 
                              set modifier to #strength-save.textContent
                              set sign to '+'
                              if modifier is less than 0 set sign to '-' end
                              set #dice-input's value to 'd20' + sign + Math.abs(modifier)
                              send click to the last <button/> in #dice-roller"
                          >
                            <output id="strength-save" name="strength-save">+0</output>
                          </button>
                          <input id="strength-save-proficiency" type="checkbox" name="strength-save-proficiency"/>
                        </span>
                      </label>
                    </div>  
                </fieldset>
        
                <fieldset name="character-sheet-abiility-dexterity-score" class="character-sheet-ability">
                  <legend>DEXTERITY</legend>
                  <div class="rows columns-3">
                    <label for="character-sheet-abiility-dexterity-score">
                      Score
                      <input type="number" min="0" max="30" name="character-sheet-ability-score-dexterity" />
                    </label>
                    <label for="character-sheet-ability-modifier-dexterity">
                      Mod
                      <input type="number" name="character-sheet-ability-modifier-dexterity" >
                    </label>
                    <label for="character-sheet-ability-save-dexterity">
                      Save
                      <span>
                        <input type="number" name="character-sheet-ability-save-dexterity">
                        <input type="checkbox" name="character-sheet-ability-save-dexterity-proficiency" />
                      </span>
                    </label>
                  </div>
                </fieldset>
                    
                <fieldset name="character-sheet-abiility-constitution-score" class="character-sheet-ability">
                  <legend>CONSTITUTION</legend>
                  <div class="rows columns-3">
                    <label for="character-sheet-abiility-constitution-score">
                      Score
                      <input type="number" min="0" max="30" name="character-sheet-ability-score-constitution" />
                    </label>
                    <label for="character-sheet-ability-modifier-constitution">
                      Mod
                      <input type="number" name="character-sheet-ability-modifier-constitution" >
                    </label>
                    <label for="character-sheet-ability-save-constitution">
                      Save
                      <span>
                        <input type="number" name="character-sheet-ability-save-constitution">
                        <input type="checkbox" name="character-sheet-ability-save-constitution-proficiency" />
                      </span>
                    </label>
                  </div>
                </fieldset>
              </div>
              
              <div class="rows columns-3">
                <fieldset name="character-sheet-abiility-intelligence-score" class="character-sheet-ability">
                  <legend>INTELLIGENCE</legend>
                  <div class="rows columns-3">
                    <label for="character-sheet-abiility-intelligence-score">
                      Score
                      <input type="number" min="0" max="30" name="character-sheet-ability-score-intelligence" />
                    </label>
                    <label for="character-sheet-ability-modifier-intelligence">
                      Mod
                      <input type="number" name="character-sheet-ability-modifier-intelligence" >
                    </label>
                    <label for="character-sheet-ability-save-intelligence">
                      Save
                      <span>
                        <input type="number" name="character-sheet-ability-save-intelligence">
                        <input type="checkbox" name="character-sheet-ability-save-intelligence-proficiency" />
                      </span>
                    </label>
                  </div>
                </fieldset>
                
                <fieldset name="character-sheet-abiility-wisdom-score" class="character-sheet-ability">
                  <legend>WISDOM</legend>
                  <div class="rows columns-3">
                    <label for="character-sheet-abiility-wisdom-score">
                      Score
                      <input type="number" min="0" max="30" name="character-sheet-ability-score-wisdom" />
                    </label>
                    <label for="character-sheet-ability-modifier-wisdom">
                      Mod
                      <input type="number" name="character-sheet-ability-modifier-wisdom" >
                    </label>
                    <label for="character-sheet-ability-save-wisdom">
                      Save
                      <span>
                        <input type="number" name="character-sheet-ability-save-wisdom">
                        <input type="checkbox" name="character-sheet-ability-save-wisdom-proficiency" />
                      </span>
                    </label>
                  </div>
                </fieldset>
                      
                <fieldset name="character-sheet-abiility-charisma-score" class="character-sheet-ability">
                  <legend>CHARISMA</legend>
                  <div class="rows columns-3">
                    <label for="character-sheet-abiility-charisma-score">
                      Score
                      <input type="number" min="0" max="30" name="character-sheet-ability-score-charisma" />
                    </label>
                    <label for="character-sheet-ability-modifier-charisma">
                      Mod
                      <input type="number" name="character-sheet-ability-modifier-charisma" >
                    </label>
                    <label for="character-sheet-ability-save-charisma">
                      Save
                      <span>
                        <input type="number" name="character-sheet-ability-save-charisma">
                        <input type="checkbox" name="character-sheet-ability-save-charisma-proficiency" />
                      </span>
                    </label>
                  </div>
                </fieldset>  
              </div>
            </fieldset>
    
            <fieldset name="character-sheet-skills" class="character-sheet-skills">
              <legend>SKILLS</legend>

              <table>
                <tbody>
                  <tr>
                    <td>
                      <button
                        class="roller"
                        popovertarget="dice-roller"
                        popoveraction="show"
                      >
                        Acrobatics (Dex)
                      </button>
                    </td>
                    <td>
                      <input type="number" id="acrobatics-total">
                    </td>
                    <td>
                      <label>
                        <span>
                          Proficient
                          <input type="checkbox" id="acrobatics-proficiency">
                        </span>
                      </label>
                    </td>
                    <td>
                      <label>
                        <span>
                          Expertise
                          <input type="checkbox" id="acrobatics-expertise">
                        </span>
                      </label>
                    </td>
                  </tr>
        
                  <tr>
                    <td>
                      <button
                        class="roller"
                        popovertarget="dice-roller"
                        popoveraction="show"
                        _="on click 
                        set modifier to the #animal-handling-total's value


                        if modifier is empty
                          set #dice-input's value to 'd20'
                        end

                        if modifier is not empty
                          if modifier is less than 0
                            set #dice-input's value to 'd20' + `${modifier}`
                          end
                          if modifier is greater than or equal to 0
                            set #dice-input's value to `d20+${modifier}`
                          end
                        end

                        send click to the last <button/> in #dice-roller"
                      >
                        Animal Handling (Wis)
                      </button>
                    </td>

                    <td>
                      <input type="number" name="animal-handling-total">
                    </td>

                    <td>
                      <label>
                        Proficient
                        <input type="checkbox" name="animal-handling-proficiency">
                      </label>
                    </td>

                    <td>
                      <label>
                        Expertise
                        <input type="checkbox" name="animal-handling-expertise">
                      </label>
                    </td>
                  </tr>
        
                  <tr>
                    <td>
                      Arcana (Int)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-arcana-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-arcana-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-arcana-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Athletics (Str)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-athletics-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-athletics-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-athletics-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Deception (Cha)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-deception-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-deception-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-deception-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      History (Int)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-history-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-history-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-history-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Insight (Wis)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-insight-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-insight-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-insight-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Intimidation (Cha)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-intimidation-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-intimidation-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-intimidation-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Investigation (Int)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-investigation-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-investigation-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-investigation-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Medicine (Wis)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-medicine-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-medicine-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-medicine-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Nature (Int)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-nature-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-nature-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-nature-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Perception (Wis)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-perception-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-perception-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-perception-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Performance (Cha)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-performance-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-performance-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-performance-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Persuasion (Cha)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-persuasion-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-persuasion-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-persuasion-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Religion (Int)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-religion-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-religion-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-religion-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Sleight of Hand (Dex)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-sleight-of-hand-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-sleight-of-hand-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-sleight-of-hand-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Stealth (Dex)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-stealth-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-stealth-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-stealth-total">
                    </td>

                  </tr>
        
                  <tr>
                    <td>
                      Survival (Wis)
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-survival-proficiency">
                    </td>
                    <td>
                      <input type="checkbox" name="character-sheet-survival-expertise">
                    </td>
                    <td>
                      <input type="number" name="character-sheet-survival-total">
                    </td>

                  </tr>
                </tbody>
              </table>
            </fieldset>
          </section>
    
          <section name="column-3">  
          </section>
    
          <section name="column-3">
          </section>
        </div>


      </section>

  </section>
  </main>
  </body>
  </html>
