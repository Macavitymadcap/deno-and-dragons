<article class="card">
  <h2>Initiative Tracker</h2>
  <div class="status">
    <label for="current-round">
      Current Round:
      <output id="current-round">0</output>
    </label>
    <label for="current-turn">
      Current Turn:
      <output id="current-turn"></output>
    </label>
    <button
      _="on click 
          set round to (value of #current-round)
          set turn to (value of #current-turn)
          set lastCombatant to the value of the first <input.name-input/> in the last <tr.combatant/>

          if round is 0 and turn is empty
            increment #current-round's value
            toggle .current-turn on the first <tr.combatant/>
            set the value of #current-turn to the value of the first <input.name-input/>

          else if turn matches lastCombatant
            increment #current-round's value 
            toggle .current-turn on the last <tr.combatant/>
            toggle .current-turn on the first <tr.combatant/>
            set the value of #current-turn to the value of the first <input.name-input/>
          else
            get the first <tr.combatant.current-turn/>
            toggle .current-turn on it
            get the next <tr.combatant/> from it
            toggle .current-turn on it
            set the value of #current-turn to the value of the <input.name-input/> in it
          end"
    >
      &#8649;
    </button>
  </div>
  <table class="initiative-table">
    <thead>
      <tr>
        <th class="initiative-header" title="Sort By Initiative">
          <span>
            Initiative
          </span>
          <button _="on click call sortInitiativeTable()">
            &#8645;
          </button>
        </th>
        <th>Name</th>
        <th>AC</th>
        <th>HP</th>
        <th>Temp HP</th>
        <th>Conditions</th>
        <th>
          <button
            hx-get="organisms/combatant.html"
            hx-trigger="click"
            hx-target="#combatants"
            hx-swap="beforeend"
            title="Add a Combatant"
          >
            &#65291;
          </button>
        </th>
      </tr>
    </thead>
    <tbody id="combatants"></tbody>
  </table>
  <datalist id="conditions">
    <option>Blinded</option>
    <option>Charmed</option>
    <option>Exhaustion</option>
    <option>Frightened</option>
    <option>Grappled</option>
    <option>Incapacitated</option>
    <option>Invisible</option>
    <option>Paralyzed</option>
    <option>Petrified</option>
    <option>Poisoned</option>
    <option>Prone</option>
    <option>Restrained</option>
    <option>Stunned</option>
    <option>Unconscious</option>
  </datalist>
</article>
